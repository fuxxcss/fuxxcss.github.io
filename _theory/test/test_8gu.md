---
title: "八股文：软件测试"
excerpt: '安全测试、功能和性能测试的理论与场景'

collection: theory
category: test
permalink: /theory/test-8gu
tags: 
  - testing
  - code audit

layout: single
read_time: true
author_profile: false
comments: true
share: true
related: true
---

![](../../images/theory/8gu.png)

## 基础测试

**什么是测试？**
- 测试是软件开发生命周期（SDLC）中重要的一环。
- 1）分析需求；2）软件设计；3）软件开发；4）软件测试；5）运行维护
- 敏捷测试，在项目的早期开始并持续进行测试。

### 一、测试方法

**1.测试的常用方法？**
- 单元测试，一个函数的输入边界值，错误处理，和输出的预期值是否符合函数文档。
- 功能测试，一个接口的响应是否符合接口文档。
- 集成测试，多个函数、多个接口之间的交互、数据传递是否正确。
- 回归测试，在bug修复后，重新执行之前的测试用例。
- 性能测试，模拟负载条件，评估系统的性能指标。
- 安全测试，是否存在安全漏洞。

**2.什么是黑盒测试、白盒测试？**
- 黑盒测试，只关注输入输出，日志，依据是需求测试书。
- 白盒测试，已知代码逻辑、数据流，依据是源代码。


**3.接口测试的流程？**
1. 分析需求测试书，制定测试计划。
2. 根据接口文档，设计高效的测试用例。
3. 执行测试
- 1）发送请求（URL+请求参数+请求body）
- 2）接收响应（状态码+响应头+响应body）
- 3）断言（符合接口文档）
4. 管理bug，回归测试。
5. 生成测试报告。

**4.性能测试的指标？**
- TPS，每秒事务数，性能测试的核心指标。
- 平均响应时间，反映了用户的等待时间。
- 并发数，并发测试多个用户同时访问，是否存在死锁或者其他性能问题。
- 错误率，压力测试中，请求失败的比率。
- 以redis-benchmark为例。

**5.自动化测试的优势？**
- 降本增效，提高测试覆盖率。
- 集成到CI/CD，提交触发。

**6.测试覆盖率、有效性的指标？**
- 覆盖率指标：业务场景覆盖率，接口覆盖率，代码覆盖率。
- 有效性指标：bug发现能力、误报率。

**6.测试时的鉴权？**
- 前置条件，通过接口获取鉴权的token、cookie-session，通常将登录获取的 token 做成一个 session 级别的 fixture 供全局复用。
- 测试时，通过Refresh Token等方式刷新鉴权。
- 后置条件，退出登录。

### 二、测试用例与bug

**1.什么是高效的测试用例？**
- 测试用例ID，用于追踪和管理。
- 测试用例标题，概括测试目的和场景。
- 测试的对象，指定测试所属的功能模块。
- 前置条件，状态和环境要求。
- 测试步骤，编号、可执行的操作序列，以及测试数据。
- 预期结果，每一步骤执行后，系统应有的正确响应。
- 实际结果，测试后填写。
- 测试类型，标明功能、性能还是安全测试。
- 状态，标识用例当前状态，如未执行、通过、失败、阻塞、跳过。

**2.测试用例的设计方法？**
- 设计方法，同时适合黑盒、白盒。
- 等价类划分，划分有效等价类、无效等价类，减少测试数量。
- 边界值，专注于测试边界条件，检验是否有错误处理的能力。
- 判定表，列出多种输入条件的组合，在不同逻辑下的各种情况。
- 错误推测，基于测试人员的经验，推测程序中可能隐藏的错误。
- 状态迁移，专注于事件触发的状态，覆盖所有的状态转换路径。
- 场景法，在用户的角度，模拟真实场景（特别是业务流程）。

**3.bug的生命周期？**
- 新bug（New），指定bug类型和相关信息：代码错误，设计缺陷，配置错误，安全问题，性能问题，不符合标准规范。
- 被分配（Assigned），新建的Bug分配给相应的开发人员。
- 被拒绝（Rejected），开发人员认为这不是一个Bug。
- 已修复（Fixed）开发人员已经编写代码修复了该bug。
- 回归测试（Retest），复现步骤验证Bug是否已被真正修复。
- 关闭（Closed），测试人员确认Bug已被成功修复。

**4.如何定位bug？**
1. 如何定位是前端bug还是后端bug？
- 服从接口文档，哪端没有服从接口文档，就是哪端的bug。
2. 如何定位是客户端还是服务端的问题？
- 根据接口响应的状态码，400是客户端，500是服务端。
- 再分析客户端/服务端的日志，有没有异常的日志信息。
- 场景：遇到网页白屏，抓包后定位bug。
1. 测试提交的bug, 开发认为不是，该怎么办？
- 告知开发bug的判断依据，同时明确开发说不是bug的理由。
- 参照需求⽂档，跟产品经理进行沟通确认。

**5.如何记录bug？**
- 标题，概括bug的本质。
- 环境，说明Bug出现的具体环境。
- 前置条件，执行测试步骤前的状态。
- 复现步骤，作编号。
- 预期与实际结果的对比。
- 严重程度，bug对系统功能的影响程度。
- 附件。

### 三、测试框架

**1.pytest如何实现接口自动化测试？**
- 标签化，使用@pytest.mark.{标签名} 装饰器。
- 参数化，使用标签化中的@pytest.mark.parametrize 装饰器。
- 接口关联，使用@pytest.fixture装饰器定义scope级别的夹具，常用于接口鉴权。

**2.如何编写测试报告？**
- @allure.epic指定测试的对象。
- @allure.feature指定测试类型。
- @allure.title指定测试用例的标题。
- @allure.severity定义严重程度。
- @allure.step分解为多个步骤。
- @allure.attach在报告中添加附件。
- 集成allure到CI/CD。

### 四、测试场景

**1.美图秀秀的照相功能，如何进行性能测试？**

**2.抖音评论区，如何测试？**

**3.微信收发红包，如何设计测试用例？**

**4.测试平台在假期第二天崩溃了，如何处理？**

**5.微信登录场景，需要作哪些测试？如何设计测试用例**

功能、性能、安全、接口
通过账号和密码，手机号和验证码，pc 端二维码扫描 编写相应的测试用例

**6.post接口，如何进行功能测试、性能测试、安全测试？**

（cookie是否httponly，sql注入，xss注入，防止密码爆破）

**7.微信支付场景，如何设计测试用例？**

**8.淘宝从下单 → 支付 → 完成以及退款，如何设计测试用例？**

提取出核心测试点，编写用例

**9.秒杀场景下，如何设计测试用例？**

**10.地图导航，包含起点终点搜索框和导航按钮，如何设计测试用例？**

针对地图导航页面的简化版（包含），请设计测试用例并说明测试点。
打开手机地图进入首页，里面有个搜索框，针对这个功能模块设计一下测试用例。

**11.针对微信朋友圈发布功能，如何设计测试用例？**


**12.针对一个函数接口，如何设计测试用例？**

calculateETA(int a, string b, BatchPack c)
白盒测试用例设计

**13.淘宝购物车结算页面，如何设计测试用例？**
1. **等价类+边界值**
- 商品数量：测 0、1、99、库存最大值/溢出值、非数字
- 优惠券：有效码（12 位字母数字）、无效码（空、超长、含符号）
1. **判定表补充**
- 新增条件：运费险、店铺红包、偏远地区
- 测试优惠叠加逻辑（如满减+券+红包优先级）
1. **错误推测新增**
- 多设备并发结算冲突
- 后台挂起恢复后数据完整性
1. **状态迁移**
- 重点测：支付超时/失败回滚、断网重连后状态一致性
1. **场景法**
- 主流程：加购→结算→支付→订单生成
- 异常：库存不足提示、优惠券失效刷新
场景怎么测：券包可以领取成功，但是使用失败，券包查看也没有改券，怎
么定位问题，追问，如果是后端的问题，具体怎么定位后端

## 安全测试

### 一、代码审计

**1.拿到一份Java/Go/C代码进行代码审计，审计流程是怎样的？**
- 首先确定审计范围，然后了解代码的业务。
- 根据经验判断业务可能出现的漏洞类型。
- 通过SAST工具编写规则，寻找漏洞。

**2.不同业务对应的漏洞类型？**
- 参与数据库的交互，可能存在sql注入。
- 参与页面的渲染，可能存在xss注入。
- 参与系统命令的执行，可能存在命令注入。
- 参与序列化数据的处理，可能存在反序列化漏洞。
- 参与鉴权操作，可能存在越权漏洞。
- 参与向外部服务的请求，可能存在SSRF。
- 参与内存操作，可能存在内存损坏。

**3.怎么审计xx漏洞？**
1. 审计命令注入漏洞、反序列化漏洞、内存损坏漏洞。
- 污点分析，定位所有危险的sink点，从用户可控的source点开始，判断可达性。
2. 审计sql注入、xss注入。
- 用户输入一定是可达的，因此关注：注入防御策略是否有效。
- sql预编译是否有效。
- xss黑白名单是否有效。
3. 审计越权漏洞、SSRF。
- 深入业务逻辑，人工操作。

**4.SAST、IAST和RASP相关问题？**
1. SAST如何降低误报率？
- 使用AI LLM对扫描结果进行分析。
- 污点可达性分析。
- 细化SAST的规则，按业务场景选择规则库。
2. SAST和IAST分别的优点和缺点？
- SAST优点是在开发的早期检测漏洞，缺点是误报率高。
- IAST优点是误报率低，缺点是只能检测实际执行的代码。
3. SAST和IAST常见工具的原理？
- codeql和joern，通过建立代码的控制流图、数据流分析，结合审计写查询语句检测漏洞。里面有封装好的CWE 语句。
- IAST通过插桩agent来动态检测漏洞。
4. SAST和IAST如何集成到CI/CD中？
- 代码提交后，自动触发SAST和IAST生成检测结果。
- 确保在代码合并、部署之前通过SAST和IAST。
5. IAST和RASP的异同？
- 二者都通过插桩agent，在运行时检测漏洞。
- IAST运行在测试环境，RASP运行在生产环境。
- RASP同时拦截攻击。

### 二、漏洞的防御与修复

**1.SQL注入如何防御、修复？**

遇到order by时怎么防御？
防护SQL注入时，哪些场景、哪些SQL语句不能进行预编译？
预编译无法防御的order by怎么修复？
用转义字符防御时，如果遇到数据库的列名或是表名本身就带着特殊字符，应该怎么做
宽字节注入怎么防御？
java系统中的sql注入怎么做一个防御和修复
php在做sql注入防御时有哪些方法
php和java侧预编译有什么区别
写代码的时候怎么防止sql二次注入
带外利用如何防御？
时间盲注如何防御？
mysql报错注入常用的函数，如何防御？
预编译和参数绑定的区别（预编译在数据库操作层面，参数绑定在代码层面）？

**2.XXE漏洞如何修复？**

xxe的修复, 怎么写(伪代码) 
xxe和ssrf区别？

**3.SSRF漏洞如何防御？**

怎么防御ssrf，场景：http://ip/?url=image.jpg
基于黑白名单的修复，现在的生产基本都是用的docker，ip是随时变的，而且docker重启后可能什么都不一样了，怎么做一个修复
如果用白名单策略修复ssrf，从用户输入的变量里拿出要访问的目标，这个要注意哪些，因为一些url会通过特殊的字符做白名单绕过，对取变量这个操作有哪些要注意的细节？
ssrf可以使用的伪协议，哪些功能点会有ssrf？
加白，最常用的方法，后续又补充了说限制一些不必要的协议，像 gopher 这种完全没必要啊，还有就是不给回显，这样的话对方探活也探不出什么东西，可能就以为这里并不存在 ssrf，但还得是白名单牛逼

**4.XSS漏洞如何防御、修复？**

反射型和DOM型，（后端怎么修，前端怎么修）
输出到href的XSS如何防御
实体化转义，但是我们有一个场景啊, 你看我们上传简历这里, 有时候会支持上传html的简历, 对吧. 他本身业务就需要用到html, 如果用html实体化转义的话, 他全都会被转义, 那这样的话业务就崩了嘛, 对不对. 那这种情况下我们要怎么样去写一个xss的过滤, 或者是说转义, 去解决这个类似于简历这个场景. 你可以想一想, 写不出来代码也没关系.。白名单限制, 黑名单过滤.其实我们自己是这样做的, 对于这种情况, 我们第一是会做一个html标签的白名单, 第二是事件的白名单. 黑名单我们就不搞了.
csp是如何防御xss的？
xss硬编码如何利用   前端dom型被js代码转义出来，比如\u003c,前提是返回在了js中，在html中
除非具备某种标签，其特性可导致特殊编码执行，则能转义出来 
XSS中svg的修复
xss为什么无法用同源策略防护？
xss所有地方都可以用html编码修复吗？设置了httponly的情况下？

**5.反序列化漏洞如何防御？**

Fastjson2、Log4j2漏洞和原生反序列化漏洞的区别是什么？log4j2的漏洞触发为什么会有jdk版本限制，如何彻底解决该漏洞？
反序列的时候，unserialize()反序列一个字符串的时候，对象会有一些魔术方法会被自动调用到，在找反序列化的链时，有哪些魔术方法是可以作为一个入手点去找的
常见利用链？

**6.文件操作漏洞如何防御、修复？**

有一个php的程序，本身就允许文件包含的操作，同时想要避免文件包含漏洞，写代码的时候要注意哪些
远程文件包含和本地文件包含，这两种涉及的php设置有什么
本地文件包含能不能通过php配置限制文件包含的路径（不通过代码直接通过配置项来解决）
任意文件读取，一般读取什么类型的文件，如何通过文件读取获取到web的绝对路径？

**7.越权漏洞如何防御、修复？**

水平越权和垂直越权
对越权类漏洞的看法，从研发的角度来看的话
越权漏洞如何防御？

**8.内存损坏如何防御、修复？**

### 三、模糊测试

**1.QEMU模式、源码模式的区别？**

对比一下qemu模式fuzz和源码模式fuzz，说说qemu模式的动态插桩怎么实现的，有什么优缺点？

**2.普通程序、数据库模糊测试的区别？**

fuzz普通程序和数据库有哪些不同点？
怎么给AFL做适配去fuzz数据库？

**3.AFL++、AFL的区别？**

看你的博客有用过afl++去挖漏洞，说说afl++和afl有哪些不同？你觉得afl++有哪些策略对你来说很有用？

**4.AFL组成模块的工作流程？**

有哪些模块，每个模块的流程？ afl-fuzz为什么速度很快？
从选取目标开始插桩

**5.AFL的插桩原理？**

**6.如何选择模糊测试的测试点？**

感觉类似于fuzz单个API函数吧

### 四、测试场景

**1.讲讲审计过的中间件？**

Kafka（Java）CVE-2023-25194
Redis（C）
etcd（Go）

**2.如果多进程下，A进程的Source触发到了B进程的sink点，如何溯源？**
