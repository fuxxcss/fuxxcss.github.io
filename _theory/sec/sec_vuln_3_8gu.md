---
title: "RobotAgent漏洞：八股文（Part 3/3）"
excerpt: '漏洞防御的八股文'

collection: theory
category: sec
permalink: /theory/sec/vuln-8gu
tags: 
  - vuln
  - 8gu

layout: single
read_time: true
author_profile: false
comments: true
share: true
related: true
---

![](../../images/theory/8gu.png)

## 任职要求

### 一、漏洞修复

- 针对漏洞提出修复方案，编写修复策略

## 八股文

### 一、漏洞修复

**1.SQL注入如何防御、修复？**

遇到order by时怎么防御？
防护SQL注入时，哪些场景、哪些SQL语句不能进行预编译？
预编译无法防御的order by怎么修复？
用转义字符防御时，如果遇到数据库的列名或是表名本身就带着特殊字符，应该怎么做
宽字节注入怎么防御？
java系统中的sql注入怎么做一个防御和修复
php在做sql注入防御时有哪些方法
php和java侧预编译有什么区别
写代码的时候怎么防止sql二次注入
带外利用如何防御？
时间盲注如何防御？
mysql报错注入常用的函数，如何防御？
预编译和参数绑定的区别（预编译在数据库操作层面，参数绑定在代码层面）？

**2.XXE漏洞如何修复？**

xxe的修复, 怎么写(伪代码) 
xxe和ssrf区别？

**3.SSRF漏洞如何防御？**

怎么防御ssrf，场景：http://ip/?url=image.jpg
基于黑白名单的修复，现在的生产基本都是用的docker，ip是随时变的，而且docker重启后可能什么都不一样了，怎么做一个修复
如果用白名单策略修复ssrf，从用户输入的变量里拿出要访问的目标，这个要注意哪些，因为一些url会通过特殊的字符做白名单绕过，对取变量这个操作有哪些要注意的细节？
ssrf可以使用的伪协议，哪些功能点会有ssrf？
加白，最常用的方法，后续又补充了说限制一些不必要的协议，像 gopher 这种完全没必要啊，还有就是不给回显，这样的话对方探活也探不出什么东西，可能就以为这里并不存在 ssrf，但还得是白名单牛逼

**4.XSS漏洞如何防御、修复？**

反射型和DOM型，（后端怎么修，前端怎么修）
输出到href的XSS如何防御
实体化转义，但是我们有一个场景啊, 你看我们上传简历这里, 有时候会支持上传html的简历, 对吧. 他本身业务就需要用到html, 如果用html实体化转义的话, 他全都会被转义, 那这样的话业务就崩了嘛, 对不对. 那这种情况下我们要怎么样去写一个xss的过滤, 或者是说转义, 去解决这个类似于简历这个场景. 你可以想一想, 写不出来代码也没关系.。白名单限制, 黑名单过滤.其实我们自己是这样做的, 对于这种情况, 我们第一是会做一个html标签的白名单, 第二是事件的白名单. 黑名单我们就不搞了.
csp是如何防御xss的？
xss硬编码如何利用   前端dom型被js代码转义出来，比如\u003c,前提是返回在了js中，在html中
除非具备某种标签，其特性可导致特殊编码执行，则能转义出来 
XSS中svg的修复
xss为什么无法用同源策略防护？
xss所有地方都可以用html编码修复吗？设置了httponly的情况下？

**5.反序列化漏洞如何防御？**

Fastjson2、Log4j2漏洞和原生反序列化漏洞的区别是什么？log4j2的漏洞触发为什么会有jdk版本限制，如何彻底解决该漏洞？
反序列的时候，unserialize()反序列一个字符串的时候，对象会有一些魔术方法会被自动调用到，在找反序列化的链时，有哪些魔术方法是可以作为一个入手点去找的
常见利用链？

**6.文件操作漏洞如何防御、修复？**

有一个php的程序，本身就允许文件包含的操作，同时想要避免文件包含漏洞，写代码的时候要注意哪些
远程文件包含和本地文件包含，这两种涉及的php设置有什么
本地文件包含能不能通过php配置限制文件包含的路径（不通过代码直接通过配置项来解决）
任意文件读取，一般读取什么类型的文件，如何通过文件读取获取到web的绝对路径？

**7.越权漏洞如何防御、修复？**

水平越权和垂直越权
对越权类漏洞的看法，从研发的角度来看的话
越权漏洞如何防御？

### 二、场景题
